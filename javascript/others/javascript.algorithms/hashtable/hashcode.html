<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>模拟 Java 中 String 类的 hashCode 方法</title>
</head>

<body>
  <p>hash的类型是int，int的范围是MIN_VALUE = -0x80000000; MAX_VALUE = 0x7fffffff;</p>
  <p>需要一个模拟java中int超出范围变负数的方法</p>
  <script>
    function isNull(str) {
      return str == null || str.value == "";
    }

    /**
     * java String hashCode 的实现
     * @param strKey
     * @return intValue
     */
    function hashCode(strKey) {
      var hash = 0;
      if (!isNull(strKey)) {
        for (var i = 0; i < strKey.length; i++) {
          hash = hash * 31 + strKey.charCodeAt(i);
          hash = intValue(hash);
        }
      }
      return hash;
    }
    /**
     * 将js页面的number类型转换为java的int类型
     * @param num
     * @return intValue
     */
    function intValue(num) {
      var MAX_VALUE = 0x7fffffff;
      var MIN_VALUE = -0x80000000;
      if (num > MAX_VALUE || num < MIN_VALUE) {
        return num &= 0xFFFFFFFF;
      }
      return num;
    }

  </script>
</body>

</html>
